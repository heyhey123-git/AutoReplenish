"use strict";var breakingList=[];function reloadItem(pl,it){it.isNull()||setTimeout(function(){if(pl.getHand().isNull())for(var _i=0,invArr_1=pl.getInventory().getAllItems();_i<invArr_1.length;_i++){var _it=invArr_1[_i];if(_it.type===it.type&&pl.getHand().isNull()){pl.getHand().set(_it),_it.setNull(),pl.refreshItems();break}}},600)}mc.listen("onUseItem",function(pl,it){reloadItem(pl,it)}),mc.listen("onAte",function(pl,it){reloadItem(pl,it)}),mc.listen("onConsumeTotem",function(pl){reloadItem(pl,mc.newItem("minecraft:totem_of_undying",1))}),mc.listen("onStartDestroyBlock",function(pl,bl){pl.getHand().isNull()||(bl={player:pl.uniqueId,block:{x:bl.pos.x,y:bl.pos.y,z:bl.pos.z,dimid:bl.pos.dimid,type:bl.type},mainhandItem:pl.getHand()},breakingList.push(bl))}),mc.listen("onLeft",function(pl){for(var i=0;i<breakingList.length;i++)if(breakingList[i].player===pl.uniqueId){breakingList.splice(i,1);break}}),setInterval(function(){for(var deleteIndexArr=[],i=0;i<breakingList.length;i++){var viewBlock=mc.getPlayer(breakingList[i].player).getBlockFromViewVector();if(null!==viewBlock){var prop,breakingBlockInfo=breakingList[i].block,viewBlockInfo={x:viewBlock.pos.x,y:viewBlock.pos.y,z:viewBlock.pos.z,dimid:viewBlock.pos.dimid,type:viewBlock.type},sameBlock=!0;for(prop in breakingBlockInfo)if(viewBlockInfo[prop]!==breakingBlockInfo[prop]){sameBlock=!1;break}sameBlock||deleteIndexArr.push(i)}}for(var _i=0,deleteIndexArr_1=deleteIndexArr;_i<deleteIndexArr_1.length;_i++)breakingList.splice(deleteIndexArr_1[_i],1)},800),mc.listen("onDestroyBlock",function(pl,bl){for(var i=0;i<breakingList.length;i++)if(breakingList[i].player===pl.uniqueId){reloadItem(pl,breakingList[i].mainhandItem);break}});